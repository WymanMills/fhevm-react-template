import{c as C,h as P,a as M,i as L,w as $,g as c,b as x,s as V,e as b,f as I,r as k}from"./vendor-wagmi-_eIOl4oT.js";import{s as w}from"./vendor-rainbowkit-CDyV7Ucd.js";import"./vendor-react-CqkleIqs.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();const s=C({chains:[w],connectors:[L({target:"metaMask"})],storage:M({storage:window.localStorage}),transports:{[w.id]:P()}}),f="0xbc70aFE54495D028586f7E77c257359F1FDf6483",v=[{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_area",type:"uint32"},{internalType:"uint32",name:"_bedrooms",type:"uint32"},{internalType:"uint32",name:"_bathrooms",type:"uint32"},{internalType:"uint32",name:"_yearBuilt",type:"uint32"},{internalType:"uint32",name:"_floorLevel",type:"uint32"},{internalType:"uint32",name:"_locationScore",type:"uint32"}],name:"registerProperty",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"propertyId",type:"uint256"},{internalType:"uint64",name:"_estimatedValue",type:"uint64"},{internalType:"uint32",name:"_confidenceScore",type:"uint32"}],name:"submitValuation",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"valuator",type:"address"}],name:"authorizeValuator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"valuator",type:"address"}],name:"revokeValuator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"propertyId",type:"uint256"}],name:"calculateAverageValuation",outputs:[{internalType:"bool",name:"hasRevealed",type:"bool"},{internalType:"uint64",name:"averageValue",type:"uint64"},{internalType:"uint32",name:"averageConfidence",type:"uint32"},{internalType:"uint256",name:"valuationCount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"propertyOwner",type:"address"}],name:"getOwnerProperties",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"propertyId",type:"uint256"},{indexed:!0,internalType:"address",name:"owner",type:"address"}],name:"PropertyRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"valuationId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"propertyId",type:"uint256"},{indexed:!0,internalType:"address",name:"valuator",type:"address"}],name:"ValuationSubmitted",type:"event"}],T=11155111,l=document.getElementById("connectWallet"),p=document.getElementById("switchNetwork"),S=document.getElementById("connectionStatus"),A=document.getElementById("statusText"),B=document.getElementById("registerForm"),E=document.getElementById("valuationForm"),R=document.getElementById("loadProperties"),N=document.getElementById("authorizeValuator"),D=document.getElementById("revokeValuator");function d(e,t=!1){A.textContent=e,S.className=t?"status-box status-error":"status-box status-connected"}function u(e,t){const n=document.getElementById(e);n&&n.classList.toggle("show",t)}async function F(){try{await x(s,{connector:L({target:"metaMask"})});const e=c(s);e.chainId!==T?(p.classList.remove("hidden"),d(`Connected to ${e.address?.substring(0,6)}...${e.address?.substring(38)} (Wrong network)`,!0)):(d(`Connected to ${e.address?.substring(0,6)}...${e.address?.substring(38)} on Sepolia`,!1),l.textContent="Connected",l.disabled=!0,p.classList.add("hidden"))}catch(e){console.error("Connection failed:",e),d("Failed to connect wallet",!0)}}async function O(){try{await V(s,{chainId:w.id}),setTimeout(()=>{const e=c(s);e.address&&(d(`Connected to ${e.address.substring(0,6)}...${e.address.substring(38)} on Sepolia`,!1),p.classList.add("hidden"))},1e3)}catch(e){console.error("Failed to switch network:",e),d("Failed to switch to Sepolia network",!0)}}async function _(e){if(e.preventDefault(),!c(s).address){alert("Please connect your wallet first");return}const n=document.getElementById("propertyArea").value,o=document.getElementById("propertyBedrooms").value,r=document.getElementById("propertyBathrooms").value,a=document.getElementById("propertyYearBuilt").value,i=document.getElementById("propertyFloorLevel").value,m=document.getElementById("propertyLocationScore").value;try{u("registerLoading",!0);const h=document.getElementById("registerResult"),y=await b(s,{address:f,abi:v,functionName:"registerProperty",args:[parseInt(n),parseInt(o),parseInt(r),parseInt(a),parseInt(i),parseInt(m)]});await I(s,{hash:y}),h.innerHTML=`
      <div class="status-success">
        ✅ Property registered successfully!<br>
        <small>Transaction: ${y.substring(0,10)}...${y.substring(y.length-8)}</small>
      </div>
    `,B.reset()}catch(h){console.error("Registration failed:",h);const y=document.getElementById("registerResult");y.innerHTML=`
      <div class="status-error">
        ❌ Registration failed: ${h.message||"Unknown error"}
      </div>
    `}finally{u("registerLoading",!1)}}async function H(e){if(e.preventDefault(),!c(s).address){alert("Please connect your wallet first");return}const n=document.getElementById("valuationPropertyId").value,o=document.getElementById("valuationAmount").value,r=document.getElementById("valuationConfidence").value;try{u("valuationLoading",!0);const a=document.getElementById("valuationResult"),i=await b(s,{address:f,abi:v,functionName:"submitValuation",args:[BigInt(n),BigInt(o),parseInt(r)]});await I(s,{hash:i}),a.innerHTML=`
      <div class="status-success">
        ✅ Valuation submitted successfully!<br>
        <small>Transaction: ${i.substring(0,10)}...${i.substring(i.length-8)}</small>
      </div>
    `,E.reset()}catch(a){console.error("Valuation submission failed:",a);const i=document.getElementById("valuationResult");let m="Valuation submission failed. ";a.message?.includes("Not authorized valuator")?m+="You are not authorized as a valuator.":a.message?.includes("Property not active")?m+="This property is not active or does not exist.":m+=a.message||"Unknown error",i.innerHTML=`<div class="status-error">❌ ${m}</div>`}finally{u("valuationLoading",!1)}}async function z(){const e=c(s);if(!e.address){alert("Please connect your wallet first");return}try{u("propertiesLoading",!0);const t=document.getElementById("propertiesList"),n=await k(s,{address:f,abi:v,functionName:"getOwnerProperties",args:[e.address]});if(n.length===0){t.innerHTML='<div class="info-text">No properties found.</div>';return}t.innerHTML=n.map(o=>`
      <div class="property-item">
        <h4 class="font-bold">Property #${o.toString()}</h4>
        <p class="text-sm text-gray-400 mt-1">Property registered on blockchain</p>
        <p class="text-xs text-gray-500 mt-1"><strong>Owner:</strong> You</p>
      </div>
    `).join("")}catch(t){console.error("Failed to load properties:",t),alert(`Failed to load properties: ${t.message}`)}finally{u("propertiesLoading",!1)}}async function W(){if(!c(s).address){alert("Please connect your wallet first");return}const t=document.getElementById("valuatorAddress").value;if(!t){alert("Please enter a valuator address");return}try{u("adminLoading",!0);const n=document.getElementById("adminResult"),o=await b(s,{address:f,abi:v,functionName:"authorizeValuator",args:[t]});await I(s,{hash:o}),n.innerHTML='<div class="status-success">✅ Valuator authorized successfully!</div>',document.getElementById("valuatorAddress").value=""}catch(n){console.error("Authorization failed:",n);const o=document.getElementById("adminResult");o.innerHTML=`<div class="status-error">❌ Authorization failed: ${n.message}</div>`}finally{u("adminLoading",!1)}}async function Y(){if(!c(s).address){alert("Please connect your wallet first");return}const t=document.getElementById("valuatorAddress").value;if(!t){alert("Please enter a valuator address");return}try{u("adminLoading",!0);const n=document.getElementById("adminResult"),o=await b(s,{address:f,abi:v,functionName:"revokeValuator",args:[t]});await I(s,{hash:o}),n.innerHTML='<div class="status-success">✅ Valuator revoked successfully!</div>',document.getElementById("valuatorAddress").value=""}catch(n){console.error("Revocation failed:",n);const o=document.getElementById("adminResult");o.innerHTML=`<div class="status-error">❌ Revocation failed: ${n.message}</div>`}finally{u("adminLoading",!1)}}l.addEventListener("click",F);p.addEventListener("click",O);B.addEventListener("submit",_);E.addEventListener("submit",H);R.addEventListener("click",z);N.addEventListener("click",W);D.addEventListener("click",Y);$(s,{onChange(e){e.address?e.chainId===T?(d(`Connected to ${e.address.substring(0,6)}...${e.address.substring(38)} on Sepolia`,!1),l.textContent="Connected",l.disabled=!0,p.classList.add("hidden")):(d(`Connected to ${e.address.substring(0,6)}...${e.address.substring(38)} (Wrong network)`,!0),p.classList.remove("hidden")):(d("Not Connected",!0),l.textContent="Connect MetaMask Wallet",l.disabled=!1)}});const g=c(s);g.address?g.chainId===T?(d(`Connected to ${g.address.substring(0,6)}...${g.address.substring(38)} on Sepolia`,!1),l.textContent="Connected",l.disabled=!0):(d(`Connected to ${g.address.substring(0,6)}...${g.address.substring(38)} (Wrong network)`,!0),p.classList.remove("hidden")):d("MetaMask detected - Click to connect",!1);
//# sourceMappingURL=index-De01en4e.js.map
